# 孫っち - リスク・課題

> 最終更新: 2024年12月

## リスクマトリクス

| リスク | 影響度 | 発生確率 | 優先度 |
|--------|--------|----------|--------|
| 高齢者の音声認識精度 | 高 | 中 | **最優先** |
| LLM応答の安全性 | 高 | 低 | 高 |
| 応答速度 | 中 | 中 | 高 |
| APIコスト | 中 | 中 | 中 |
| 開発スコープ膨張 | 中 | 高 | 中 |

---

## 詳細と対策

### 1. 高齢者の音声認識精度

**リスク内容**
- 高齢者特有の発話パターン（ゆっくり、方言、不明瞭）で認識精度が低下
- 「通じない」体験が継続利用を阻害

**対策**
- PoC段階で高齢者の発話サンプルでテスト
- Whisper API の large モデル使用を検討
- プロンプトエンジニアリングで補正
  - 「以下は高齢者の発話の文字起こしです。多少の誤認識を補正してください」
- 聞き返し機能の実装
  - 「〇〇ということでよろしいですか？」

**検証基準**
- 標準的な発話: 90%以上
- ゆっくり/不明瞭な発話: 80%以上

---

### 2. LLM応答の安全性

**リスク内容**
- 不適切な情報を提供（医療アドバイスなど）
- 高齢者を混乱させる応答
- 詐欺的な誘導に対する脆弱性

**対策**
- システムプロンプトで制約を設定
  - 医療・法律の専門的アドバイスは控える
  - 個人情報の取り扱いに注意
  - 金融取引の勧誘は行わない
- 出力フィルタリングの実装
- Claude APIの安全性機能を活用

**検証基準**
- 医療相談への適切な応答（「専門家に相談してください」）
- 詐欺的な質問への拒否応答

---

### 3. 応答速度

**リスク内容**
- 音声入力→応答出力まで時間がかかりすぎる
- 高齢者が「壊れた」と誤解
- 会話のテンポが悪くなる

**対策**
- ストリーミングレスポンスで即座に表示開始
- 音声合成は文単位で順次再生
- 「考え中」のビジュアルフィードバック
- APIリクエストの並列化

**目標値**
- 音声入力完了→テキスト表示: 1秒以内
- テキスト表示→音声再生開始: 2秒以内
- 全体: 3秒以内

---

### 4. APIコスト

**リスク内容**
- 使用量増加でコストが想定を超える
- 個人開発では持続困難

**対策**
- 使用量モニタリングの実装
- レート制限の設定
- 効率的なプロンプト設計（トークン削減）
- 会話履歴の圧縮・要約

**月額予算**
- 開発段階: ~$50
- β版: ~$100
- 正式版: 収益化で賄う

---

### 5. 開発スコープ膨張

**リスク内容**
- 「あれもこれも」で完成しない
- 完璧を求めすぎてリリースできない

**対策**
- MVP機能を厳格に維持
- 「将来機能」リストで管理（今はやらない）
- 2週間スプリントで進捗確認
- PoC → MVP → β の段階的リリース

**判断基準**
- 新機能追加は「MVPに必須か？」で判断
- 答えがNoなら将来機能リストへ

---

## 技術的課題

### ブラウザ音声APIの制約
- iOS Safariでの音声録音に制約あり
- 自動再生ポリシーで音声出力に制限

**対策**
- ユーザーアクション起点での処理
- PWAでの対応検討

### プッシュ通知
- iOS Safariではプッシュ通知に制限
- リマインダー機能に影響

**対策**
- MVP段階ではブラウザを開いている時のみ
- β版でPWA対応、ネイティブアプリ検討

---

## 未決定事項

- [ ] TTS選定（ElevenLabs vs VOICEVOX）
- [ ] デプロイ先（Railway vs Render）
- [ ] 認証方式（Supabase Auth vs 独自実装）
- [ ] プロンプト戦略（会話履歴の扱い）

---

*関連ドキュメント: [技術スタック](./04_TECH_STACK.md) | [ロードマップ](./02_ROADMAP.md)*
